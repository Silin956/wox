/*!
 * Wox.js v2.1.10
 * (c) 2018-2019 Evio Shen
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],e):e((t=t||self).Wox={},t.Vue)}(this,function(t,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,u,"next",t)}function u(t){n(s,i,o,a,u,"throw",t)}a(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,r){return(f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&h(i,r.prototype),i}).apply(null,arguments)}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}function y(t,e,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m;e=e&&e.hasOwnProperty("default")?e.default:e,function(t){!function(e){var r="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=i(t);function i(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=i(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,u={create:o?function(){return M(Object.create(null))}:s?function(){return M({__proto__:null})}:function(){return M({})},has:a?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:a?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),h="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,o)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new f}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,l=new(h||"function"!=typeof WeakMap?function(){var t=16,r=u.create(),n=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){var r=o(t,!0);return r[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+a()}while(u.has(r,t));return r[t]=!0,t}function o(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:u.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(){var e=function(t){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t);return s(new Array(t),t)}(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var i=e[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function v(t,e,r){var n=l.get(t);if(_(n)){if(!r)return;n=new f,l.set(t,n)}var i=n.get(e);if(_(i)){if(!r)return;i=new f,n.set(e,i)}return i}function y(t,e,r){var n=v(e,r,!1);return!_(n)&&!!n.has(t)}function d(t,e,r){var n=v(e,r,!1);if(!_(n))return n.get(t)}function m(t,e,r,n){var i=v(r,n,!0);i.set(t,e)}function g(t,e){var r=[],n=v(t,e,!1);if(_(n))return r;for(var o=n.keys(),s=function(t){var e=P(t,i);if(!j(e))throw new TypeError;var r=e.call(t);if(!b(r))throw new TypeError;return r}(o),a=0;;){var u=$(s);if(!u)return r.length=a,r;var c=u.value;try{r[a]=c}catch(t){try{A(s)}finally{throw t}}a++}}function w(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function _(t){return void 0===t}function x(t){return null===t}function b(t){return"object"==typeof t?null!==t:"function"==typeof t}function k(t,e){switch(w(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",i=P(t,n);if(void 0!==i){var o=i.call(t,r);if(b(o))throw new TypeError;return o}return function(t,e){if("string"===e){var r=t.toString;if(j(r)){var n=r.call(t);if(!b(n))return n}var i=t.valueOf;if(j(i)){var n=i.call(t);if(!b(n))return n}}else{var i=t.valueOf;if(j(i)){var n=i.call(t);if(!b(n))return n}var o=t.toString;if(j(o)){var n=o.call(t);if(!b(n))return n}}throw new TypeError}(t,"default"===r?"number":r)}function R(t){var e=k(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function O(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function j(t){return"function"==typeof t}function E(t){return"function"==typeof t}function P(t,e){var r=t[e];if(null!=r){if(!j(r))throw new TypeError;return r}}function $(t){var e=t.next();return!e.done&&e}function A(t){var e=t.return;e&&e.call(t)}function q(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i?e:i===t?e:i}function M(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,r,n){if(_(r)){if(!O(t))throw new TypeError;if(!E(e))throw new TypeError;return function(t,e){for(var r=t.length-1;r>=0;--r){var n=t[r],i=n(e);if(!_(i)&&!x(i)){if(!E(i))throw new TypeError;e=i}}return e}(t,e)}if(!O(t))throw new TypeError;if(!b(e))throw new TypeError;if(!b(n)&&!_(n)&&!x(n))throw new TypeError;return x(n)&&(n=void 0),r=R(r),function(t,e,r,n){for(var i=t.length-1;i>=0;--i){var o=t[i],s=o(e,r,n);if(!_(s)&&!x(s)){if(!b(s))throw new TypeError;n=s}}return n}(t,e,r,n)}),t("metadata",function(t,e){return function(r,n){if(!b(r))throw new TypeError;if(!_(n)&&!function(t){switch(w(t)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;m(t,e,r,n)}}),t("defineMetadata",function(t,e,r,n){if(!b(r))throw new TypeError;_(n)||(n=R(n));return m(t,e,r,n)}),t("hasMetadata",function(t,e,r){if(!b(e))throw new TypeError;_(r)||(r=R(r));return function t(e,r,n){var i=y(e,r,n);if(i)return!0;var o=q(r);if(!x(o))return t(e,o,n);return!1}(t,e,r)}),t("hasOwnMetadata",function(t,e,r){if(!b(e))throw new TypeError;_(r)||(r=R(r));return y(t,e,r)}),t("getMetadata",function(t,e,r){if(!b(e))throw new TypeError;_(r)||(r=R(r));return function t(e,r,n){var i=y(e,r,n);if(i)return d(e,r,n);var o=q(r);if(!x(o))return t(e,o,n);return}(t,e,r)}),t("getOwnMetadata",function(t,e,r){if(!b(e))throw new TypeError;_(r)||(r=R(r));return d(t,e,r)}),t("getMetadataKeys",function(t,e){if(!b(t))throw new TypeError;_(e)||(e=R(e));return function t(e,r){var n=g(e,r);var i=q(e);if(null===i)return n;var o=t(i,r);if(o.length<=0)return n;if(n.length<=0)return o;var s=new p;var a=[];for(var u=0,c=n;u<c.length;u++){var h=c[u],f=s.has(h);f||(s.add(h),a.push(h))}for(var l=0,v=o;l<v.length;l++){var h=v[l],f=s.has(h);f||(s.add(h),a.push(h))}return a}(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!b(t))throw new TypeError;_(e)||(e=R(e));return g(t,e)}),t("deleteMetadata",function(t,e,r){if(!b(e))throw new TypeError;_(r)||(r=R(r));var n=v(e,r,!1);if(_(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var i=l.get(e);if(i.delete(r),i.size>0)return!0;return l.delete(e),!0})}(n)}()}(m||(m={}));var g=["Get","Post","Put","Delete"],w={},_={};g.forEach(function(t){w[t]=function(e,r,n){if("string"==typeof e)return function(r,n,i){var o=Reflect.getMetadata("Http",i.value);o||(o=[]),o.unshift({method:t,prefix:"/"===e?"(/?)":e}),Reflect.defineMetadata("Http",o,i.value)};var i=Reflect.getMetadata("Http",n.value);i||(i=[]),i.unshift({method:t,prefix:"(/?)"}),Reflect.defineMetadata("Http",i,n.value)}});var x=function(){function t(){o(this,t),this._eventStacks={}}return a(t,null,[{key:"Methods",get:function(){return["on","off","addListener","removeListener","prependListener","removeAllListeners","emit","eventNames","listenerCount","listeners"]}}]),a(t,[{key:"on",value:function(t,e){this.addListener(t,e)}},{key:"off",value:function(t,e){this.removeListener(t,e)}},{key:"addListener",value:function(t,e){this._eventStacks[t]||(this._eventStacks[t]=[]),this._eventStacks[t].push(e)}},{key:"removeListener",value:function(t,e){var r=this.listeners(t),n=r.indexOf(e);n>-1&&(r.splice(n,1),0===this.listenerCount(t)&&this.removeAllListeners(t))}},{key:"prependListener",value:function(t,e){this._eventStacks[t]||(this._eventStacks[t]=[]),this._eventStacks[t].unshift(e)}},{key:"removeAllListeners",value:function(t){this._eventStacks[t]&&delete this._eventStacks[t]}},{key:"emit",value:function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,i,o,s,a,u=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.listeners(e)){t.next=3;break}return t.abrupt("return");case 3:for(n=u.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=u[o];s=0;case 5:if(!(s<r.length)){t.next=12;break}return a=r[s],t.next=9,a.apply(void 0,i);case 9:s++,t.next=5;break;case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"eventNames",value:function(){return Object.keys(this._eventStacks)}},{key:"listenerCount",value:function(t){var e=this.listeners(t);return e?e.length:0}},{key:"listeners",value:function(t){return this._eventStacks[t]}}]),t}(),b={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===r(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}},k=L;function R(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var O=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,E=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,P=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),$=["'"].concat(P),A=["%","/","?",";","#"].concat($),q=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},D=require("querystring");function L(t,e,r){if(t&&b.isObject(t)&&t instanceof R)return t;var n=new R;return n.parse(t,e,r),n}R.prototype.parse=function(t,e,n){if(!b.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var a=t=s.join(o);if(a=a.trim(),!n&&1===t.split("#").length){var u=E.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?D.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=O.exec(a);if(c){var h=(c=c[0]).toLowerCase();this.protocol=h,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||c&&T[c]||(a=a.substr(2),this.slashes=!0)}if(!T[c]&&(f||c&&!I[c])){for(var p,l,v=-1,y=0;y<q.length;y++){-1!==(d=a.indexOf(q[y]))&&(-1===v||d<v)&&(v=d)}-1!==(l=-1===v?a.lastIndexOf("@"):a.lastIndexOf("@",v))&&(p=a.slice(0,l),a=a.slice(l+1),this.auth=decodeURIComponent(p)),v=-1;for(y=0;y<A.length;y++){var d;-1!==(d=a.indexOf(A[y]))&&(-1===v||d<v)&&(v=d)}-1===v&&(v=a.length),this.host=a.slice(0,v),a=a.slice(v),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),w=(y=0,g.length);y<w;y++){var _=g[y];if(_&&!_.match(M)){for(var x="",k=0,R=_.length;k<R;k++)_.charCodeAt(k)>127?x+="x":x+=_[k];if(!x.match(M)){var j=g.slice(0,y),P=g.slice(y+1),L=_.match(S);L&&(j.push(L[1]),P.unshift(L[2])),P.length&&(a="/"+P.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase();var N=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+N,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!C[h])for(y=0,w=$.length;y<w;y++){var W=$[y];if(-1!==a.indexOf(W)){var H=encodeURIComponent(W);H===W&&(H=escape(W)),a=a.split(W).join(H)}}var V=a.indexOf("#");-1!==V&&(this.hash=a.substr(V),a=a.slice(0,V));var z=a.indexOf("?");if(-1!==z?(this.search=a.substr(z),this.query=a.substr(z+1),e&&(this.query=D.parse(this.query)),a=a.slice(0,z)):e&&(this.search="",this.query={}),a&&(this.pathname=a),I[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var F=this.search||"";this.path=N+F}return this.href=this.format(),this},R.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&b.isObject(this.query)&&Object.keys(this.query).length&&(o=D.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||I[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},R.prototype.resolve=function(t){return this.resolveObject(L(t,!1,!0)).format()},R.prototype.resolveObject=function(t){if(b.isString(t)){var e=new R;e.parse(t,!1,!0),t=e}for(var r=new R,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return I[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!I[t.protocol]){for(var c=Object.keys(t),h=0;h<c.length;h++){var f=c[h];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||T[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var l=r.pathname||"",v=r.search||"";r.path=l+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=d||y||r.host&&t.pathname,g=m,w=r.pathname&&r.pathname.split("/")||[],_=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!I[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),m=m&&(""===p[0]||""===w[0])),d)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=t.search,r.query=t.query;else if(!b.isNullOrUndefined(t.search)){if(_)r.hostname=r.host=w.shift(),(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift());return r.search=t.search,r.query=t.query,b.isNull(r.pathname)&&b.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=w.slice(-1)[0],k=(r.host||t.host||w.length>1)&&("."===x||".."===x)||""===x,O=0,j=w.length;j>=0;j--)"."===(x=w[j])?w.splice(j,1):".."===x?(w.splice(j,1),O++):O&&(w.splice(j,1),O--);if(!m&&!g)for(;O--;O)w.unshift("..");!m||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var E,P=""===w[0]||w[0]&&"/"===w[0].charAt(0);_&&(r.hostname=r.host=P?"":w.length?w.shift():"",(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift()));return(m=m||r.host&&w.length)&&!P&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),b.isNull(r.pathname)&&b.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},R.prototype.parseHost=function(){var t=this.host,e=j.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var N=function(){function t(e){o(this,t),this.history=e}return a(t,[{key:"redirect",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.history).redirect.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"replace",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.history).replace.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"reload",value:function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.history.reload();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),U={hash:"hashchange",html5:"popstate"},W=function(t){function e(t){var r;return o(this,e),(r=v(this,c(e).call(this))).history_installed=!1,r.history_process_listener=null,r.history_stop_run_process=!1,r.history_event_name=U[t]||"hashChange","html5"!==t||window.history.pushState||(r.history_event_name=U.hash),r}return u(e,x),a(e,[{key:"history_create_context",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=function(e,r){return t.history_stop_run_process=!1,r},n=this.history_parse(e.url);return n.body=e.body,n.isapi=!!e.url,n.method=e.method?e.method.toUpperCase():"GET",n.isapi||(n.referer=this.history_referer,r=function(e,r){return e||(t.history_referer=n.href),t.history_stop_run_process=!1,r}),{next:r,request:n,response:new N(this)}}},{key:"history_parse",value:function(t){switch(this.history_event_name){case U.html5:return k(t?window.location.origin+t:window.location.href,!0);default:var e=window.location,r=t&&"#"!==t.charAt(0)?"#"+t:e.hash,n=k(r.length?r.substr(1):"/",!0);return n.host=e.host,n.hostname=e.hostname,n.port=e.port,n.protocol=e.protocol,n}}},{key:"history_create_server",value:function(t){this.history_process_listener=t}},{key:"history_listen",value:function(){var t=this,e=function(){t.history_stop_run_process||t.history_run_process()};return window.addEventListener(this.history_event_name,e),this.history_installed=!0,function(){return window.removeEventListener(t.history_event_name,e)}}},{key:"history_run_process",value:function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.history_create_context(e),n=r.request,i=r.response,o=r.next,t.next=3,this.history_process_listener(n,i,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"redirect",value:function(){var t=i(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.history_event_name,t.next=t.t0===U.html5?3:16;break;case 3:if(!r){t.next=11;break}return this.history_stop_run_process=!0,t.next=7,this.history_run_process({url:e});case 7:n=t.sent,window.history.pushState({},window.document.title,e),t.next=15;break;case 11:return window.history.pushState({},window.document.title,e),t.next=14,this.reload();case 14:n=t.sent;case 15:return t.abrupt("break",27);case 16:if(!r){t.next=23;break}return t.next=19,this.history_run_process({url:e});case 19:n=t.sent,window.location.hash=e,t.next=27;break;case 23:return window.location.hash=e,t.next=26,this.reload();case 26:n=t.sent;case 27:return t.abrupt("return",n);case 28:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"replace",value:function(){var t=i(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.history_event_name,t.next=t.t0===U.html5?3:16;break;case 3:if(!r){t.next=11;break}return this.history_stop_run_process=!0,t.next=7,this.history_run_process({url:e});case 7:n=t.sent,window.history.replaceState({},window.document.title,e),t.next=15;break;case 11:return window.history.replaceState({},window.document.title,e),t.next=14,this.reload();case 14:n=t.sent;case 15:return t.abrupt("break",27);case 16:if(!r){t.next=23;break}return t.next=19,this.history_run_process({url:e});case 19:n=t.sent,H(e),t.next=27;break;case 23:return H(e),t.next=26,this.reload();case 26:n=t.sent;case 27:return t.abrupt("return",n);case 28:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"reload",value:function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.history_run_process();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"history_url_render",value:function(t){if(t)switch(this.history_stop_run_process=!0,this.history_event_name){case U.html5:window.history.replaceState({},window.document.title,t);break;default:H(t)}}},{key:"history_href",value:function(t){var e=window.location;switch(this.history_event_name){case U.html5:return e.origin+t;default:return e.origin+e.pathname+e.search+"#"+t}}}]),e}();function H(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)}function V(t,e){if(!(this instanceof V))return new V(t,e);this.proto=t,this.target=e,this.methods=[],this.getters=[],this.setters=[],this.fluents=[]}V.prototype.method=function(t){var e=this.proto,r=this.target;return this.methods.push(t),e[t]=function(){return this[r][t].apply(this[r],arguments)},this},V.prototype.access=function(t){return this.getter(t).setter(t)},V.prototype.getter=function(t){var e=this.proto,r=this.target;return this.getters.push(t),e.__defineGetter__(t,function(){return this[r][t]}),this},V.prototype.setter=function(t){var e=this.proto,r=this.target;return this.setters.push(t),e.__defineSetter__(t,function(e){return this[r][t]=e}),this},V.prototype.fluent=function(t){var e=this.proto,r=this.target;return this.fluents.push(t),e[t]=function(e){return void 0!==e?(this[r][t]=e,this):this[r][t]},this};var z=function(t){function e(t,r){var n;return o(this,e),(n=v(this,c(e).call(this,"[Wox Error]: "+t))).status=r||500,n.code=r||500,n}return u(e,p(Error)),e}(),F={error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return new z(t instanceof Error?t.message:t,e)},render:function(t,e){return this.status=200,this.app.render(t,e)}},K=new V(F,"response"),G=new V(F,"request");K.method("redirect").method("replace").method("reload").method("fetch").method("get").method("post").method("put").method("delete"),G.access("search").access("method").access("query").access("path").access("url").access("body").access("referer").getter("protocol").getter("host").getter("hostname").getter("secure").getter("isapi").access("referer");var B={get url(){return this.req.href},get method(){return this.req.method||"GET"},get path(){return this.req.pathname},get query(){return this.req.query},get search(){return this.req.search},get host(){return this.req.host},get hostname(){return this.req.hostname},get protocol(){return this.req.protocol},get secure(){return"https"===this.protocol},get isapi(){return this.req.isapi},get referer(){return this.req.referer}},Z={redirect:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.res).redirect.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),replace:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.res).replace.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),reload:function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.res.reload();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),fetch:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.app).fetch.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),get:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.app).get.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),post:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.app).post.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),put:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.app).put.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),delete:function(){var t=i(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e=this.app).delete.apply(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};function J(t){return function(e,r){var n=-1;return function i(o){if(o<=n)return Promise.reject(new z("[compose] next() called multiple times"));n=o;var s=t[o];o===t.length&&(s=r);if(!s)return Promise.resolve();try{return Promise.resolve(s(e,i.bind(null,o+1)))}catch(t){return Promise.reject(t)}}(0)}}var Y=function(t){function e(t){var r;return o(this,e),(r=v(this,c(e).call(this,t))).middleware=[],r.context=Object.create(F),r.request=Object.create(B),r.response=Object.create(Z),r.contextRequestId=0,r.listener=null,r}return u(e,W),a(e,[{key:"serverCreateContext",value:function(t,e){var r=Object.create(this.context),n=r.request=Object.create(this.request),i=r.response=Object.create(this.response);return r.app=n.app=i.app=this,r.req=n.req=i.req=t,r.res=n.res=i.res=e,n.ctx=i.ctx=r,n.response=i,i.request=n,r.status=404,r.id=(new Date).getTime()+"_"+this.contextRequestId++,this.contextEvents(r)}},{key:"contextEvents",value:function(t){var e=new x;return x.Methods.forEach(function(r){"function"==typeof e[r]&&Object.defineProperty(t,r,{value:e[r].bind(e)})}),t}},{key:"serverHandleRequest",value:function(){var t=i(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e).then(function(){switch(e.isapi?440===e.status&&void 0!==e.body&&(e.status=200):void 0!==e.body&&404===e.status&&(e.status=200),e.status){case 404:return Promise.reject(e.error("Not Find Request Path: "+e.path,404));case 440:if(!e.isapi)return Promise.reject(e.error("No Webview Found On "+e.path,440));case 200:return e.body;default:return Promise.reject(e.error(e.reason||"Unknown Error",e.status))}}).catch(function(t){return t.status||(t.status=500),Promise.reject(t)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"fetch",value:function(){var t=i(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.history_installed){t.next=2;break}throw F.error("No history installed",502);case 2:return t.next=4,y(c(e.prototype),"history_run_process",this).call(this,r);case 4:if(!((n=t.sent)instanceof z)){t.next=7;break}throw n;case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=i(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch({url:e,method:"GET"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=i(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch({url:e,body:r,method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"put",value:function(){var t=i(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fetch({url:e,body:r,method:"PUT"}));case 1:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=i(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch({url:e,method:"DELETE"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"use",value:function(t){return this.middleware.push(t),this}},{key:"createServer",value:function(){var t=i(regeneratorRuntime.mark(function t(r){var n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=J(this.middleware),y(c(e.prototype),"history_create_server",this).call(this,function(){var t=i(regeneratorRuntime.mark(function t(e,r,i){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.serverCreateContext(e,r),t.next=3,o.emit("start",s);case 3:return t.next=5,o.serverHandleRequest(s,n).then(function(t){return i(null),Promise.all([s.emit("success",t),o.emit("stop",s)]).then(function(){return t})}).catch(function(t){i(t);var e=!1;return t.preventDefault=function(){return e=!0},Promise.all([s.emit("error",t),o.emit("error",t),o.emit("stop",s)]).then(function(){if(!e)return Promise.reject(t)})});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)}));return function(e,r,n){return t.apply(this,arguments)}}()),this.listener=y(c(e.prototype),"history_listen",this).call(this),t.next=5,y(c(e.prototype),"history_run_process",this).call(this,{url:r});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"destoryServer",value:function(){this.listener&&this.listener()}}]),e}(),Q=function(){function t(e,r,n){o(this,t),this.app=e,this.name=r,this.dependencies=n,this.container=e.$plugin,e.$plugin.set(r,this),Object.defineProperty(this,"$config",{get:function(){return e.$plugin.getConfig(r)}})}return a(t,[{key:"get",value:function(t){if(-1===this.dependencies.indexOf(t))throw F.error("".concat(t," is not one of ").concat(JSON.stringify(this.dependencies)));return this.app.$plugin.get(t)}},{key:"setDecorate",value:function(t){return this.app.$plugin.setDecorate(t),this}}]),t}(),X=function(){function t(e){o(this,t),this.stacks={},this.configs=e,this.decorates={}}return a(t,[{key:"set",value:function(t,e){return this.stacks[t]=e,this}},{key:"get",value:function(t){return this.stacks[t]}},{key:"getConfig",value:function(t){return this.configs[t]}},{key:"setDecorate",value:function(t){var e=new t;return this.decorates[e.name]=e,this}},{key:"renderDecorateIntoInterface",value:function(){var t=this,e=function(e){var r=t.decorates[e];"function"==typeof r.interfaceWillInject&&(_[e]=function(){return r.interfaceWillInject.apply(r,arguments)})};for(var r in this.decorates)e(r)}}]),t}(),tt={name:"WoxViewPage",computed:{webview:function(){return this.$root.webview},props:function(){return this.$root.props}},created:function(){var t=this;this.$root.$on("enter",function(e){var r=t.$refs.dynamicRenderer;r&&("function"==typeof r.$options.enter&&r.$options.enter.call(r,e),t.$root._virtualModel=r)}),this.$root.$on("leave",function(){var e=t.$root._virtualModel;e&&"function"==typeof e.$options.leave&&e.$options.leave.call(e)})},render:function(t){if(this.webview)return t(this.webview,{props:this.props,ref:"dynamicRenderer"})}},et=function(){function t(e,r,n){o(this,t),this.app=e,this.el=r,this.name=n,this.url=null,this.sync=!1,this.handle=null}return a(t,[{key:"set",value:function(t,e){this.url=t,this.sync="sync"===e}},{key:"bind",value:function(t,e){var r=this;this.handle=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof r.app[r.name]){t.next=3;break}return t.next=3,r.app[r.name](r.url,r.sync);case 3:case"end":return t.stop()}},t)})),this.el.addEventListener("click",this.handle),this.set(t,e)}},{key:"unbind",value:function(){this.handle&&this.el.removeEventListener("click",this.handle),this.el.__wox_directive_taqrget__&&delete this.el.__wox_directive_taqrget__}}]),t}(),rt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.configs=e,this.result={}}return a(t,[{key:"render",value:function(){return this.CustomConfigRender(),this.PluginConfigRender(),this.result}},{key:"CustomConfigRender",value:function(){var t=(this.configs.custom_configs||[]).map(function(t){return t.default||t});this.result.custom_configs=Object.assign.apply(Object,[{}].concat(d(t)))}},{key:"PluginConfigRender",value:function(){var t=this.configs.plugin_configs||{};this.result.plugin_configs=t.default||t}},{key:"VueInjectRender",value:function(){var t=this,r=this.configs.component,n=this.configs.directive,i=this.configs.filter,o=this.configs.mixin;r.forEach(function(r){t.ContextEach(r,function(t,r){if(!r.name)throw new z("component miss name option in ".concat(t,"."));e.component(r.name,r)})}),n.forEach(function(r){t.ContextEach(r,function(t,r){var n=t.split("/").slice(-1)[0].split(".").slice(0,-1)[0];e.directive(n,r)})}),i.forEach(function(r){t.ContextEach(r,function(t,r){var n=t.split("/").slice(-1)[0].split(".").slice(0,-1)[0];e.filter(n,r)})}),o.forEach(function(r){t.ContextEach(r,function(t,r){return e.mixin(r)})})}},{key:"ContextEach",value:function(t,e){t.keys().forEach(function(r){var n=t(r).default;e(r,n)})}},{key:"PluginRender",value:function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,i,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.configs.bootstrap,n=0;case 2:if(!(n<r.length)){t.next=13;break}if(i=r[n],o=[e],i.name&&o.push(new Q(e,i.name,i.dependencies)),"function"!=typeof(s=i.exports.default||i.exports)){t.next=10;break}return t.next=10,s.apply(void 0,o);case 10:n++,t.next=2;break;case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"ControllerRender",value:function(){for(var t=[],e=this.configs.controller,r=0;r<e.length;r++){var n=e[r];this.ContextEach(n,function(e,r){r._filePath=e,-1===t.indexOf(r)&&t.push(r)})}return t}},{key:"DecorateRender",value:function(t){var e=this;this.configs.decorate.forEach(function(r){e.ContextEach(r,function(e,r){return t.$plugin.setDecorate(r)})})}},{key:"BuildVue",value:function(t){var n,i=this;t.$config.el?n="object"===r(t.$config.el)?t.$config.el:window.document.querySelector(t.$config.el):(n=window.document.createElement("div"),window.document.body.appendChild(n)),["redirect","replace","reload","get","post","put","del"].forEach(function(r){var n="$"+r;if(e.prototype[r])throw new Error("'".concat(r,"' is inject on vue.js"));e.prototype[n]=function(){var e=n;if("del"===r&&(e="$del"),"function"==typeof t[e])return t[e].apply(t,arguments)}}),function(t){["redirect","replace","reload"].forEach(function(r){e.directive(r,{bind:function(e,n){var i=new et(t,e,r);i.bind(n.value,n.arg),e.__wox_directive_taqrget__=i},unbind:function(t){t.__wox_directive_taqrget__&&t.__wox_directive_taqrget__.unbind()},update:function(t,e){t.__wox_directive_taqrget__&&t.__wox_directive_taqrget__.set(e.value,e.arg)},componentUpdated:function(t,e){t.__wox_directive_taqrget__&&t.__wox_directive_taqrget__.set(e.value,e.arg)}})})}(t),e.component("WoxViewPage",tt);var o={webview:null,props:null,installed:!1},s={name:"WoxRuntimeViewModel",data:function(){return o},mounted:function(){this.installed=!0},render:function(t){return i.configs.view?t(i.configs.view.default||i.configs.view):t(tt)}};t.emit("setup",s);var a=new e(s);return t.on("start",function(t){t.isapi||a.$emit("leave",t)}),t.on("stop",function(t){t.isapi||a.$emit("enter",t)}),a.$mount(n),a}}]),t}(),nt="/",it=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function ot(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function st(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function at(t){return t&&t.sensitive?"":"i"}function ut(t,e,r){return function(t,e,r){for(var n=(r=r||{}).strict,i=!1!==r.start,o=!1!==r.end,s=r.delimiter||nt,a=[].concat(r.endsWith||[]).map(ot).concat("$").join("|"),u=i?"^":"",c=0;c<t.length;c++){var h=t[c];if("string"==typeof h)u+=ot(h);else{var f=h.repeat?"(?:"+h.pattern+")(?:"+ot(h.delimiter)+"(?:"+h.pattern+"))*":h.pattern;e&&e.push(h),h.optional?h.prefix?u+="(?:"+ot(h.prefix)+"("+f+"))?":u+="("+f+")?":u+=ot(h.prefix)+"("+f+")"}}if(o)n||(u+="(?:"+ot(s)+")?"),u+="$"===a?"$":"(?="+a+")";else{var p=t[t.length-1],l="string"==typeof p?p[p.length-1]===s:void 0===p;n||(u+="(?:"+ot(s)+"(?="+a+"))?"),l||(u+="(?="+ot(s)+"|"+a+")")}return new RegExp(u,at(r))}(function(t,e){for(var r,n=[],i=0,o=0,s="",a=e&&e.delimiter||nt,u=e&&e.whitelist||void 0,c=!1;null!==(r=it.exec(t));){var h=r[0],f=r[1],p=r.index;if(s+=t.slice(o,p),o=p+h.length,f)s+=f[1],c=!0;else{var l="",v=r[2],y=r[3],d=r[4],m=r[5];if(!c&&s.length){var g=s.length-1,w=s[g];(!u||u.indexOf(w)>-1)&&(l=w,s=s.slice(0,g))}s&&(n.push(s),s="",c=!1);var _="+"===m||"*"===m,x="?"===m||"*"===m,b=y||d,k=l||a;n.push({name:v||i++,prefix:l,delimiter:k,optional:x,repeat:_,pattern:b?st(b):"[^"+ot(k===a?k:k+a)+"]+?"})}}return(s||o<t.length)&&n.push(s+t.substr(o)),n}(t,r),e,r)}function ct(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,r){for(var n=[],i=0;i<t.length;i++)n.push(ct(t[i],e,r).source);return new RegExp("(?:"+n.join("|")+")",at(r))}(t,e,r):ut(t,e,r)}function ht(t,e,n,i){this.opts=i||{},this.name=this.opts.name||null,this.methods=[],this.paramNames=[],this.stack=Array.isArray(n)?n:[n],e.forEach(function(t){var e=this.methods.push(t.toUpperCase());"GET"===this.methods[e-1]&&this.methods.unshift("HEAD")},this),this.stack.forEach(function(n){var i=r(n);if("function"!==i)throw new Error(e.toString()+" `"+(this.opts.name||t)+"`: `middleware` must be a function, not `"+i+"`")},this),this.path=t,this.regexp=ct(t,this.paramNames,this.opts)}function ft(t){try{return decodeURIComponent(t)}catch(e){return t}}function pt(t){if(!(this instanceof pt))return new pt(t);this.opts=t||{},this.methods=this.opts.methods||["GET"],this.params={},this.stack=[]}function lt(t,e){var r=t.$plugin.decorates;e.slice(0).sort(function(t,e){return(Reflect.getOwnMetadata("Index",t)||0)-(Reflect.getOwnMetadata("Index",e)||0)}).forEach(function(e){var n,o=Reflect.getMetadata("Controller",e),s=new pt,a=Reflect.getMetadata("Middleware",e)||[];(Reflect.getMetadata("Param",e)||[]).forEach(function(t){return s.param.apply(s,[t.id].concat(d(t.middlewares)))});for(var u=Object.getOwnPropertyNames(e.prototype),c=function(t){var n=u[t];if("constructor"===n)return"continue";var o=Reflect.getOwnMetadata("Middleware",e.prototype[n])||[],a=Reflect.getOwnMetadata("Http",e.prototype[n]),c={};for(var h in r){var f=r[h].get(e.prototype[n]);void 0!==f&&(c[h]={value:f,target:r[h]})}a&&a.forEach(function(t){var r=o.slice(0);r.push(function(){var t=i(regeneratorRuntime.mark(function t(r,i){var o,s,a,u,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a in r.status=440,(o=new e(r)).ctx||Object.defineProperty(o,"ctx",{get:function(){return r}}),s={},c)u=c[a].target,h=c[a].value,"function"==typeof u.interfaceDidRendered&&u.interfaceDidRendered(h,{options:s,ctx:r});return t.next=7,o[n].call(o,s);case 7:void 0!==(f=t.sent)&&(r.body=f);case 9:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()),s[t.method.toLowerCase()].apply(s,[t.prefix].concat(d(r)))})},h=0;h<u.length;h++)c(h);(n=t.$router).use.apply(n,[o].concat(d(a),[s.routes()]))})}ht.prototype.match=function(t){return this.regexp.test(t)},ht.prototype.params=function(t,e,r){for(var n=r||{},i=e.length,o=0;o<i;o++)if(this.paramNames[o]){var s=e[o];n[this.paramNames[o].name]=s?ft(s):s}return n},ht.prototype.captures=function(t){return this.opts.ignoreCaptures?[]:t.match(this.regexp).slice(1)},ht.prototype.param=function(t,e){var r=this.stack,n=this.paramNames,i=function(r,n){return e.call(this,r.params[t],r,n)};i.param=t;var o=n.map(function(t){return t.name}),s=o.indexOf(t);return s>-1&&r.some(function(t,e){if(!t.param||o.indexOf(t.param)>s)return r.splice(e,0,i),!0}),this},ht.prototype.setPrefix=function(t){return this.path&&(this.path=t+this.path,this.paramNames=[],this.regexp=ct(this.path,this.paramNames,this.opts)),this},g.forEach(function(t){pt.prototype[t.toLowerCase()]=function(e,r,n){return"string"==typeof r||r instanceof RegExp?n=Array.prototype.slice.call(arguments,2):(n=Array.prototype.slice.call(arguments,1),r=e,e=null),this.register(r,[t.toUpperCase()],n,{name:e}),this}}),pt.prototype.del=pt.prototype.delete,pt.prototype.use=function(){var t,e=this,r=Array.prototype.slice.call(arguments);if(Array.isArray(r[0])&&"string"==typeof r[0][0])return r[0].forEach(function(t){e.use.apply(e,[t].concat(r.slice(1)))}),this;var n="string"==typeof r[0];return n&&(t=r.shift()),r.forEach(function(r){r.router?(r.router.stack.forEach(function(r){t&&r.setPrefix(t),e.opts.prefix&&r.setPrefix(e.opts.prefix),e.stack.push(r)}),e.params&&Object.keys(e.params).forEach(function(t){r.router.param(t,e.params[t])})):e.register(t||"(.*)",[],r,{end:!1,ignoreCaptures:!n})}),this},pt.prototype.prefix=function(t){return t=t.replace(/\/$/,""),this.opts.prefix=t,this.stack.forEach(function(e){e.setPrefix(t)}),this},pt.prototype.routes=pt.prototype.middleware=function(){var t=this,e=function(e,r){var n=t.opts.routerPath||e.routerPath||e.path,i=t.match(n,e.method);if(e.matched?e.matched.push.apply(e.matched,i.path):e.matched=i.path,e.router=t,!i.route)return r();var o=i.pathAndMethod,s=o[o.length-1];return e._matchedRoute=s.path,s.name&&(e._matchedRouteName=s.name),J(o.reduce(function(t,e){return t.push(function(t,r){return t.captures=e.captures(n,t.captures),t.params=e.params(n,t.captures,t.params),t.routerName=e.name,r()}),t.concat(e.stack)},[]))(e,r)};return e.router=this,e},pt.prototype.all=function(t,e,r){return"string"==typeof e?r=Array.prototype.slice.call(arguments,2):(r=Array.prototype.slice.call(arguments,1),e=t,t=null),this.register(e,methods,r,{name:t}),this},pt.prototype.register=function(t,e,r,n){n=n||{};var i=this,o=this.stack;if(Array.isArray(t))return t.forEach(function(t){i.register.call(i,t,e,r,n)}),this;var s=new ht(t,e,r,{end:!1!==n.end||n.end,name:n.name,sensitive:n.sensitive||this.opts.sensitive||!1,strict:n.strict||this.opts.strict||!1,prefix:n.prefix||this.opts.prefix||"",ignoreCaptures:n.ignoreCaptures});return this.opts.prefix&&s.setPrefix(this.opts.prefix),Object.keys(this.params).forEach(function(t){s.param(t,this.params[t])},this),o.push(s),s},pt.prototype.route=function(t){for(var e=this.stack,r=e.length,n=0;n<r;n++)if(e[n].name&&e[n].name===t)return e[n];return!1},pt.prototype.match=function(t,e){for(var r,n=this.stack,i={path:[],pathAndMethod:[],route:!1},o=n.length,s=0;s<o;s++)(r=n[s]).match(t)&&(i.path.push(r),(0===r.methods.length||~r.methods.indexOf(e))&&(i.pathAndMethod.push(r),r.methods.length&&(i.route=!0)));return i},pt.prototype.param=function(t,e){return this.params[t]=e,this.stack.forEach(function(r){r.param(t,e)}),this};var vt=function(){function t(e){o(this,t),this.name=e}return a(t,[{key:"set",value:function(t,e){Reflect.defineMetadata(this.name,e,t)}},{key:"get",value:function(t){return Reflect.getMetadata(this.name,t)}}]),t}(),yt=function(t){function e(){return o(this,e),v(this,c(e).call(this,"Service"))}return u(e,vt),a(e,[{key:"interfaceWillInject",value:function(t,e){var r=this;return function(n,i,o){if(i||o){var s=r.get(o.value);s||(s={}),s[t]=e,r.set(o.value,s)}}}},{key:"interfaceDidRendered",value:function(t,e){var r=e.options,n=e.ctx,i={};for(var o in t)i[o]=new t[o](n),i[o].ctx||Object.defineProperty(i[o],"ctx",{get:function(){return n}});Object.keys(i).length>0&&(r.Service=i)}}]),e}(),dt=function(t){function r(t){var n;o(this,r);var i=new rt(t),s=i.render();return n=v(this,c(r).call(this,s.custom_configs.mode||"hash")),e.prototype.$app=l(n),n.$parser=i,n.$router=new pt,n.$env="production",n.$plugin=new X(s.plugin_configs),Object.defineProperty(l(n),"$config",{get:function(){return s.custom_configs}}),i.VueInjectRender(l(n)),n}return u(r,Y),a(r,[{key:"$fetch",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"fetch",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$get",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"get",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$post",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"post",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$put",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"put",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$delete",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"delete",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$redirect",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"redirect",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$replace",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"replace",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"$reload",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,i,o,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=s.length,i=new Array(n),o=0;o<n;o++)i[o]=s[o];return t.next=3,(e=y(c(r.prototype),"reload",this)).call.apply(e,[this].concat(i));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=i(regeneratorRuntime.mark(function t(r,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$vue){t.next=2;break}throw this.context.error("Vue is not installed.");case 2:if(r){t.next=4;break}throw this.context.error("webview required.");case 4:return this.$vue.webview=r,this.$vue.props=n,t.next=8,new Promise(function(t){return e.nextTick(t)});case 8:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"createServer",value:function(){var t=i(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$parser.PluginRender(this);case 2:return t.next=4,this.emit("PluginDidInstalled");case 4:return this.$plugin.setDecorate(yt),this.$parser.DecorateRender(this),this.$plugin.renderDecorateIntoInterface(),t.next=9,this.emit("DecorateDidInstalled");case 9:return lt(this,this.$parser.ControllerRender()),t.next=12,this.emit("RouterWillInstall");case 12:return this.use(this.$router.routes()),t.next=15,this.emit("RouterDidInstalled");case 15:return this.$vue=this.$parser.BuildVue(this),t.next=18,this.emit("ServerWillCreate");case 18:return t.next=20,y(c(r.prototype),"createServer",this).call(this,e);case 20:return t.next=22,this.emit("ServerDidCreated");case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),r}(),mt=vt,gt=x;t.Wox=dt,t.DecorateInterface=mt,t.EventEmitter=gt,t.Methods=g,t.Http=w,t.Interface=_,t.Controller=function(t){return"function"==typeof t?(Reflect.defineMetadata("Controller","(/?)",t),Reflect.defineMetadata("Index",99,t)):function(e){return Reflect.defineMetadata("Controller","/"===t?"(/?)":t,e)}},t.Index=function(t){return function(e,r,n){if(!r&&!n)return Reflect.defineMetadata("Index",t,e)}},t.Middleware=function(){for(var t=arguments,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=t[n];return function(t,e,n){if(e||n){var i,o=Reflect.getMetadata("Middleware",t);o||(o=[]),(i=o).unshift.apply(i,r),Reflect.defineMetadata("Middleware",o,n.value)}else{var s,a=Reflect.getMetadata("Middleware",t);a||(a=[]),(s=a).unshift.apply(s,r),Reflect.defineMetadata("Middleware",a,t)}}},t.Param=function(t){for(var e=arguments,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=e[i];return function(e,r,i){if(!r&&!i){var o=Reflect.getMetadata("Param",e);o||(o=[]),o.push({id:t,middlewares:n}),Reflect.defineMetadata("Param",o,e)}}},Object.defineProperty(t,"__esModule",{value:!0})});